{"ast":null,"code":"import _toConsumableArray from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/home/ni/code/js/sbchain-issuer/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createStore, applyMiddleware, combineReducers } from \"redux\";\nimport { reducer as formReducer } from \"redux-form\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunkMiddleware from \"redux-thunk\";\nimport axios from \"axios\";\nimport UserSelection from \"./model/userSelection\";\nimport session from \"express-session\";\nvar initialState = {\n  count: 0,\n  qrData: null,\n  fetching: false,\n  requestSignature: null,\n  sessionData: null,\n  serverSessionId: null,\n  uuid: null,\n  vcSent: false,\n  userSelection: [],\n  // the attributes selected by the user to be included in a VC,\n  endpoint: null,\n  // the backend server url root.\n  cardIndex: 1,\n  stepperSteps: [],\n  baseUrl: \"\",\n  DID: false,\n  //boolean, denoting that DID connection response has been received for this session\n  sealSession: \"\",\n  didAuthCallback: \"\",\n  // callback address set by the caller to redirect to after DID auth,\n  eidasUri: \"\",\n  eidasPort: \"\",\n  eidasRedirectUri: \"\",\n  unauthorized: false,\n  vcType: \"\",\n  registeredEmail: null,\n  registrationFinished: false,\n  users: [],\n  endorsement: null\n};\nexport var actionTypes = {\n  GET_QR_AUTH_RESPONSE: \"GET_QR_AUTH_RESPONSE\",\n  MAKE_QR_AUTH_REQUEST: \"MAKE_QR_AUTH_REQUEST\",\n  MAKE_VC_QR_REQUEST: \"MAKE_VC_QR_REQUEST\",\n  //make a request to generate a VC based on the selected attributes\n  GET_VC_QR_RESPONSE: \"GET_VC_QR_REQUEST\",\n  SET_ATTRIBUTES_SELECTION: \"SET_ATTRIBUTES_SELECTION\",\n  //adds an array as the user  selected attirubtes\n  ADD_SET_TO_ATTRIBUTES_SELECTION: \"ADD_SET_TO_ATTRIBUTES_SELECTION\",\n  //adds the payload to the userSelection\n  ADD_ATTRIBUTES_TO_SELECTION: \"ADD_ATTRIBUTES_TO_SELECTION\",\n  //adds the payload to the userSelection\n  // the selection takes place using identifiers from the session\n  // that are meaningful to the backend\n  REMOVE_ATTRIBUTE_FROM_SELECTION: \"REMOVE_ATTRIBUTE_FROM_SELECTION\",\n  SET_SERVER_SESSION_DATA: \"SET_SERVER_SESSION_DATA\",\n  SET_SERVER_SESSION_ID: \"SET_SERVER_SESSION_ID\",\n  VC_SENT_TO_USER: \"VC_SENT_TO_USER\",\n  SET_ENDPOINT: \"SET_END_POINT\",\n  //\n  INCREASE_CARD_INDEX: \"INCREASE_CARD_INDEX\",\n  DECREASE_CARD_INDEX: \"DECREASE_CARD_INDEX\",\n  //\n  SET_STEPPER_STEPS: \"SET_STEPPER_STEPS\",\n  //\n  SET_BASE_URL: \"SET_BASE_URL\",\n  //\n  SET_DID_TRUE: \"SES_DID_TRUE\",\n  SET_SEAL_SESSION: \"SET_SEAL_SESSION\",\n  SET_CALLBACK: \"SET_CALLBACK\",\n  SET_EIDAS_URI_PORT: \"SET_EIDAS_URI_PORT\",\n  SET_EIDAS_REDIRECT_URI: \"SET_EIDAS_REDIRECT_URI\",\n  //\n  SET_UNAUTHORIZED: \"SET_UNAUTHORIZED\",\n  //\n  SET_REGISTRATION_VC_TYPE: \"SET_REGISTRATION_VC_TYPE\",\n  SET_REGISTRATION_EMAIL: \"SET_REGISTRATION_EMAIL\",\n  SET_REGISTRATION_FINISHED: \"SET_REGISTRATION_FINISHED\",\n  SET_USERS: \"SET_USERS\",\n  SET_ENDORSEMENT: \"SET_ENDORSEMENT\"\n}; // REDUCERS\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case actionTypes.SET_ENDORSEMENT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        endorsement: action.data\n      });\n\n    case actionTypes.SET_USERS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        users: action.data\n      });\n\n    case actionTypes.SET_REGISTRATION_EMAIL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        registeredEmail: action.data\n      });\n\n    case actionTypes.SET_REGISTRATION_FINISHED:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        registrationFinished: action.data\n      });\n\n    case actionTypes.SET_REGISTRATION_VC_TYPE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        vcType: action.data\n      });\n\n    case actionTypes.SET_UNAUTHORIZED:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        unauthorized: action.data\n      });\n\n    case actionTypes.SET_EIDAS_REDIRECT_URI:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        eidasRedirectUri: action.data\n      });\n\n    case actionTypes.SET_EIDAS_URI_PORT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        eidasUri: action.data.uri,\n        eidasPort: action.data.port\n      });\n\n    case actionTypes.SET_CALLBACK:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        didAuthCallback: action.data\n      });\n\n    case actionTypes.SET_SEAL_SESSION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        sealSession: action.data\n      });\n\n    case actionTypes.SET_DID_TRUE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        DID: true,\n        uuid: action.data\n      });\n\n    case actionTypes.SET_BASE_URL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        baseUrl: action.data\n      });\n\n    case actionTypes.SET_STEPPER_STEPS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        stepperSteps: action.data\n      });\n\n    case actionTypes.INCREASE_CARD_INDEX:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cardIndex: state.cardIndex + 1\n      });\n\n    case actionTypes.DECREASE_CARD_INDEX:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cardIndex: state.cardIndex - 1\n      });\n\n    case actionTypes.SET_ENDPOINT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        endpoint: action.data\n      });\n\n    case actionTypes.VC_SENT_TO_USER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        vcSent: true\n      });\n\n    case actionTypes.SET_SERVER_SESSION_DATA:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        sessionData: action.data // userEduGain: action.data.eduGAIN,\n        // userEidas: action.data.eidas,\n\n      });\n\n    case actionTypes.GET_QR_AUTH_RESPONSE:\n      // console.log(action.data);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetching: false,\n        qrData: action.data.qr,\n        uuid: action.data.uuid,\n        requestSignature: action.data.signature\n      });\n\n    case actionTypes.SET_ATTRIBUTES_SELECTION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userSelection: action.data\n      });\n\n    case actionTypes.MAKE_QR_AUTH_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        fetching: true,\n        vcSent: false\n      });\n\n    case actionTypes.ADD_ATTRIBUTES_TO_SELECTION:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          userSelection: [].concat(_toConsumableArray(state.userSelection), [action.data])\n        });\n      }\n\n    case actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          userSelection: [].concat(_toConsumableArray(state.userSelection), _toConsumableArray(action.data))\n        });\n      }\n\n    case actionTypes.SET_SERVER_SESSION_ID:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          serverSessionId: action.data\n        });\n      }\n\n    case actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION:\n      var newSelection = _toConsumableArray(state.userSelection.filter(function (el, ind) {\n        return ind !== action.index;\n      }));\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userSelection: newSelection\n      });\n\n    default:\n      return state;\n  }\n}; // ACTIONS\n\n\nexport function loginClicked() {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    axios.get(\"connectionRequest\").then(function (data) {\n      console.log(\"got the data form the server\");\n      console.log(data.data);\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data\n      });\n    });\n  }; // return dispatch => axios.get('https://38da089e.ngrok.io/connectionRequest')\n  //     .then(({ data }) => data)\n  //     .then(items => dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST, items }))\n  //     .then( () =>{\n  //       console.log(\"got there\")\n  //         return dispatch({ type: actionTypes.GET_QR_AUTH_RESPONSE, data:'these are my awesome data' })\n  //     });\n} // export function setDIDTrue() {\n//   return dispatch => {\n//     dispatch({\n//       type: actionTypes.SET_DID_TRUE\n//     });\n//   };\n// }\n\nexport function setStepperSteps(steps) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_STEPPER_STEPS,\n      data: steps\n    });\n  };\n}\nexport function setBaseUrl(baseUrl) {\n  return function (dispatch) {\n    console.log(\"setting baseurl to\" + baseUrl);\n    dispatch({\n      type: actionTypes.SET_BASE_URL,\n      data: baseUrl\n    });\n  };\n}\nexport function startSession(sessionId, sessionStatus) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.START_SESSION,\n      data: {\n        sessionId: sessionId,\n        status: sessionStatus\n      }\n    });\n  };\n}\nexport function setServerSessionId(sessionId) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_ID,\n      data: sessionId\n    });\n  };\n}\nexport function setSessionData(sessionData) {\n  return function (dispatch) {\n    console.log(\"store.js setSessionData called with::\");\n    console.log(sessionData);\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_DATA,\n      data: sessionData\n    });\n  };\n}\nexport function setUserAttributeSelection(selectedAttributes) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_ATTRIBUTES_SELECTION,\n      data: selectedAttributes\n    });\n  };\n}\nexport function updateSession(sessionStatus) {\n  return function (dispatch) {\n    var toDispatch = {\n      type: actionTypes.UPDATE_SESSION,\n      data: {\n        status: sessionStatus\n      }\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function setEndpoint(endpoint) {\n  console.log(\"store.js set endpoint to \".concat(endpoint));\n  return function (dispatch) {\n    var toDispatch = {\n      type: actionTypes.SET_ENDPOINT,\n      data: endpoint\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function addToSelection(index, source) {\n  // console.log(`store.js:: will add to seleciton ${index} , ${source}`);\n  var data = new UserSelection(index, source);\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.ADD_ATTRIBUTES_TO_SELECTION,\n      data: data\n    });\n  };\n}\nexport function addSetToSelection(setArray) {\n  var data = [];\n  setArray.forEach(function (attrObj) {\n    Object.keys(attrObj).map(function (key) {\n      // console.log(`will fetch key ${key} from` )\n      data.push(new UserSelection(key, attrObj.source));\n      return new UserSelection(key, attrObj[key]);\n    });\n  });\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION,\n      data: data\n    });\n  };\n}\nexport function removeFromSelection(index) {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return function (dispatch) {\n    var toDispatch = {\n      type: actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION,\n      index: index\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function vcSentToUser() {\n  return function (dispatch) {\n    var toDispatch = {\n      type: actionTypes.VC_SENT_TO_USER\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function increaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return function (dispatch) {\n    var toDispatch = {\n      type: actionTypes.INCREASE_CARD_INDEX\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function decreaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return function (dispatch) {\n    var toDispatch = {\n      type: actionTypes.DECREASE_CARD_INDEX\n    };\n    dispatch(toDispatch);\n  };\n}\nexport function requestVCgeneration(url, selectedAttributes, vcType) {\n  var isMobile = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    var bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    console.log(\"store.js - requestVCgeneration:: will make VC generation request\");\n    console.log(\"store.js - requestVCgeneration:: for the url \".concat(url)); // console.log(`store.js - requestVCgeneration:: with data`)\n    // console.log(selectedAttributes);\n    // console.log(isMobile);\n\n    axios.post(url, {\n      data: selectedAttributes,\n      vcType: vcType,\n      isMobile: isMobile\n    }).then(function (data) {\n      console.log(\"store.js- requestVCgeneration:: got the data form the server\");\n      console.log(data.data);\n      console.log(\"store.js- requestVCgeneration:: got vcType\");\n      console.log(vcType);\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n        vcType: vcType\n      });\n    });\n  };\n}\nexport function makeConnectionRequest() {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    axios.post(\"/makeConnectionRequest\", {}).then(function (data) {\n      console.log(\"store.js:: makeConnectionRequest got the data form the server\");\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data\n      });\n    });\n  };\n}\nexport function completeDIDAuth(uuid) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_DID_TRUE,\n      data: uuid\n    });\n  };\n}\nexport function makeAndPushVC(url, selectedAttributes, vcType, sealSession) {\n  var isMobile = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var caseId = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : undefined;\n  return function (dispatch) {\n    var bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    console.log(\"store.js - makeAndPushVC:: will make VC generation request with attributes\");\n    console.log(selectedAttributes);\n    var postBody = {\n      data: selectedAttributes,\n      sealSession: sealSession,\n      vcType: vcType,\n      isMobile: isMobile\n    };\n\n    if (caseId) {\n      postBody.caseId = caseId;\n    }\n\n    axios.post(url, postBody).then(function (data) {\n      console.log(\"store.js- makeAndPushVC:: got the data form the server\");\n      dispatch({\n        type: actionTypes.VC_SENT_TO_USER\n      });\n    })[\"catch\"](function (err) {\n      console.log(err);\n      dispatch({\n        type: actionTypes.SET_UNAUTHORIZED,\n        data: true\n      });\n    }); //TODO add here an action denoting that the VC was sent\n  };\n}\nexport function setSealSession(sessionId) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_SEAL_SESSION,\n      data: sessionId\n    });\n  };\n}\nexport function makeSealSession(baseUrl) {\n  console.log(\"store:: makeSealSession\");\n  return function (dispatch) {\n    axios.post(\"\".concat(baseUrl, \"vc/start-session\"), {}).then(function (resp) {\n      console.log(\"store.js:: makeSealSession\"); // console.log(resp.data);\n\n      return dispatch({\n        type: actionTypes.SET_SEAL_SESSION,\n        data: resp.data\n      });\n    });\n  };\n}\nexport function makeOnlyConnectionRequest(sealSession, baseUrl, isMobile) {\n  var postData = {\n    sealSession: sealSession\n  };\n\n  if (isMobile) {\n    postData.isMobile = isMobile;\n  }\n\n  return function (dispatch) {\n    console.log(\"makeOnlyConnectionRequest \".concat(setSealSession, \", \").concat(baseUrl, \", \").concat(isMobile));\n    dispatch({\n      type: actionTypes.MAKE_QR_AUTH_REQUEST\n    });\n    var url = baseUrl && baseUrl != \"\" ? \"\".concat(baseUrl, \"onlyConnectionRequest\") : \"/onlyConnectionRequest\";\n    console.log(\"the url is \".concat(url));\n    axios.post(url, postData).then(function (data) {\n      console.log(\"store.js -- onlyConnectionRequest:: got the data form the server\");\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data\n      });\n    });\n  };\n}\nexport function makeSessionWithDIDConnecetionRequest(baseUrl, isMobile) {\n  console.log(\"store:: makeSessionWithDIDConnecetionRequest***\");\n  var sessionId = \"\";\n  return function (dispatch) {\n    var url = baseUrl && baseUrl !== \"\" ? \"\".concat(baseUrl, \"vc/start-session\") : \"/vc/start-session\";\n    console.log(\"store:: makeSessionWithDIDConnecetionRequest*** -- posting \".concat(url));\n    axios.post(url, {}).then(function (resp) {\n      sessionId = resp.data.sId;\n      console.log(\"store:: makeSessionWithDIDConnecetionRequest*** -- response with sessionId\");\n      console.log(\"the response is \");\n      console.log(resp);\n      console.log(\"and the session id is \");\n      console.log(sessionId);\n      return dispatch({\n        type: actionTypes.SET_SEAL_SESSION,\n        data: sessionId\n      });\n    }).then(function (obj) {\n      var url = baseUrl && baseUrl !== \"\" ? \"\".concat(baseUrl, \"onlyConnectionRequest\") : \"/onlyConnectionRequest\";\n      console.log(\"isMobile? \".concat(isMobile, \" and the session is \").concat(sessionId));\n      console.log(sessionId);\n      console.log(\"store:: makeSessionWithDIDConnecetionRequest*** posting to \".concat(url, \" with isMobile \").concat(isMobile, \" nad sessionId \").concat(sessionId));\n      axios.post(url, {\n        sealSession: sessionId,\n        baseUrl: baseUrl,\n        isMobile: isMobile\n      }).then(function (data) {\n        return dispatch({\n          type: actionTypes.GET_QR_AUTH_RESPONSE,\n          data: data.data\n        });\n      });\n    });\n  };\n}\nexport function setDidCallback(callback) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_CALLBACK,\n      data: callback\n    });\n  };\n}\nexport function setEidasUriPort(uri, port) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_EIDAS_URI_PORT,\n      data: {\n        uri: uri,\n        port: port\n      }\n    });\n  };\n}\nexport function setEidasRedirectUri(uri) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_EIDAS_REDIRECT_URI,\n      data: uri\n    });\n  };\n}\nexport function setUnauthorized(value) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_UNAUTHORIZED,\n      data: value\n    });\n  };\n}\nexport function setRegistrationVCType(value) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_REGISTRATION_VC_TYPE,\n      data: value\n    });\n  };\n}\nexport function setRegistrationEmail(value) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_REGISTRATION_EMAIL,\n      data: value\n    });\n  };\n}\nexport function setRegistrationFinished(value) {\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_REGISTRATION_FINISHED,\n      data: value\n    });\n  };\n}\nexport function setUsers(users) {\n  console.log(\"store.js setting users to\");\n  console.log(users);\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_USERS,\n      data: users\n    });\n  };\n}\nexport function setEndorsement(endorsement) {\n  console.log(\"store.js setEndorsement called\");\n  return function (dispatch) {\n    dispatch({\n      type: actionTypes.SET_ENDORSEMENT,\n      data: endorsement\n    });\n  };\n}\nvar rootReducer = combineReducers({\n  // ...your other reducers here\n  // you have to pass formReducer under 'form' key,\n  // for custom keys look up the docs for 'getFormState'\n  appReducer: reducer,\n  form: formReducer\n});\nexport var initializeStore = function initializeStore() {\n  var preloadedState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  return createStore(rootReducer, preloadedState, composeWithDevTools(applyMiddleware(thunkMiddleware)));\n};","map":{"version":3,"sources":["/home/ni/code/js/sbchain-issuer/store.js"],"names":["createStore","applyMiddleware","combineReducers","reducer","formReducer","composeWithDevTools","thunkMiddleware","axios","UserSelection","session","initialState","count","qrData","fetching","requestSignature","sessionData","serverSessionId","uuid","vcSent","userSelection","endpoint","cardIndex","stepperSteps","baseUrl","DID","sealSession","didAuthCallback","eidasUri","eidasPort","eidasRedirectUri","unauthorized","vcType","registeredEmail","registrationFinished","users","endorsement","actionTypes","GET_QR_AUTH_RESPONSE","MAKE_QR_AUTH_REQUEST","MAKE_VC_QR_REQUEST","GET_VC_QR_RESPONSE","SET_ATTRIBUTES_SELECTION","ADD_SET_TO_ATTRIBUTES_SELECTION","ADD_ATTRIBUTES_TO_SELECTION","REMOVE_ATTRIBUTE_FROM_SELECTION","SET_SERVER_SESSION_DATA","SET_SERVER_SESSION_ID","VC_SENT_TO_USER","SET_ENDPOINT","INCREASE_CARD_INDEX","DECREASE_CARD_INDEX","SET_STEPPER_STEPS","SET_BASE_URL","SET_DID_TRUE","SET_SEAL_SESSION","SET_CALLBACK","SET_EIDAS_URI_PORT","SET_EIDAS_REDIRECT_URI","SET_UNAUTHORIZED","SET_REGISTRATION_VC_TYPE","SET_REGISTRATION_EMAIL","SET_REGISTRATION_FINISHED","SET_USERS","SET_ENDORSEMENT","state","action","type","data","uri","port","qr","signature","newSelection","filter","el","ind","index","loginClicked","dispatch","get","then","console","log","setStepperSteps","steps","setBaseUrl","startSession","sessionId","sessionStatus","START_SESSION","status","setServerSessionId","setSessionData","setUserAttributeSelection","selectedAttributes","updateSession","toDispatch","UPDATE_SESSION","setEndpoint","addToSelection","source","addSetToSelection","setArray","forEach","attrObj","Object","keys","map","key","push","removeFromSelection","vcSentToUser","increaseCardIndex","decreaseCardIndex","requestVCgeneration","url","isMobile","bodyFormData","FormData","set","post","makeConnectionRequest","completeDIDAuth","makeAndPushVC","caseId","undefined","postBody","err","setSealSession","makeSealSession","resp","makeOnlyConnectionRequest","postData","makeSessionWithDIDConnecetionRequest","sId","obj","setDidCallback","callback","setEidasUriPort","setEidasRedirectUri","setUnauthorized","value","setRegistrationVCType","setRegistrationEmail","setRegistrationFinished","setUsers","setEndorsement","rootReducer","appReducer","form","initializeStore","preloadedState"],"mappings":"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","sourcesContent":["import { createStore, applyMiddleware, combineReducers } from \"redux\";\nimport { reducer as formReducer } from \"redux-form\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunkMiddleware from \"redux-thunk\";\nimport axios from \"axios\";\nimport UserSelection from \"./model/userSelection\";\nimport session from \"express-session\";\n\nconst initialState = {\n  count: 0,\n  qrData: null,\n  fetching: false,\n  requestSignature: null,\n  sessionData: null,\n  serverSessionId: null,\n  uuid: null,\n  vcSent: false,\n  userSelection: [], // the attributes selected by the user to be included in a VC,\n  endpoint: null, // the backend server url root.\n  cardIndex: 1,\n  stepperSteps: [],\n  baseUrl: \"\",\n  DID: false, //boolean, denoting that DID connection response has been received for this session\n  sealSession: \"\",\n  didAuthCallback: \"\", // callback address set by the caller to redirect to after DID auth,\n  eidasUri: \"\",\n  eidasPort: \"\",\n  eidasRedirectUri: \"\",\n  unauthorized: false,\n  vcType: \"\",\n  registeredEmail: null,\n  registrationFinished: false,\n  users: [],\n  endorsement : null,\n};\n\nexport const actionTypes = {\n  GET_QR_AUTH_RESPONSE: \"GET_QR_AUTH_RESPONSE\",\n  MAKE_QR_AUTH_REQUEST: \"MAKE_QR_AUTH_REQUEST\",\n\n  MAKE_VC_QR_REQUEST: \"MAKE_VC_QR_REQUEST\", //make a request to generate a VC based on the selected attributes\n  GET_VC_QR_RESPONSE: \"GET_VC_QR_REQUEST\",\n\n  SET_ATTRIBUTES_SELECTION: \"SET_ATTRIBUTES_SELECTION\", //adds an array as the user  selected attirubtes\n  ADD_SET_TO_ATTRIBUTES_SELECTION: \"ADD_SET_TO_ATTRIBUTES_SELECTION\", //adds the payload to the userSelection\n  ADD_ATTRIBUTES_TO_SELECTION: \"ADD_ATTRIBUTES_TO_SELECTION\", //adds the payload to the userSelection\n  // the selection takes place using identifiers from the session\n  // that are meaningful to the backend\n  REMOVE_ATTRIBUTE_FROM_SELECTION: \"REMOVE_ATTRIBUTE_FROM_SELECTION\",\n\n  SET_SERVER_SESSION_DATA: \"SET_SERVER_SESSION_DATA\",\n  SET_SERVER_SESSION_ID: \"SET_SERVER_SESSION_ID\",\n  VC_SENT_TO_USER: \"VC_SENT_TO_USER\",\n  SET_ENDPOINT: \"SET_END_POINT\",\n\n  //\n  INCREASE_CARD_INDEX: \"INCREASE_CARD_INDEX\",\n  DECREASE_CARD_INDEX: \"DECREASE_CARD_INDEX\",\n  //\n  SET_STEPPER_STEPS: \"SET_STEPPER_STEPS\",\n  //\n  SET_BASE_URL: \"SET_BASE_URL\",\n\n  //\n  SET_DID_TRUE: \"SES_DID_TRUE\",\n\n  SET_SEAL_SESSION: \"SET_SEAL_SESSION\",\n\n  SET_CALLBACK: \"SET_CALLBACK\",\n  SET_EIDAS_URI_PORT: \"SET_EIDAS_URI_PORT\",\n  SET_EIDAS_REDIRECT_URI: \"SET_EIDAS_REDIRECT_URI\",\n\n  //\n  SET_UNAUTHORIZED: \"SET_UNAUTHORIZED\",\n  //\n  SET_REGISTRATION_VC_TYPE: \"SET_REGISTRATION_VC_TYPE\",\n  SET_REGISTRATION_EMAIL: \"SET_REGISTRATION_EMAIL\",\n  SET_REGISTRATION_FINISHED: \"SET_REGISTRATION_FINISHED\",\n\n  SET_USERS: \"SET_USERS\",\n  SET_ENDORSEMENT: \"SET_ENDORSEMENT\",\n};\n\n// REDUCERS\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.SET_ENDORSEMENT:\n      return { ...state, endorsement: action.data };\n\n    case actionTypes.SET_USERS:\n      return { ...state, users: action.data };\n\n    case actionTypes.SET_REGISTRATION_EMAIL:\n      return { ...state, registeredEmail: action.data };\n\n    case actionTypes.SET_REGISTRATION_FINISHED:\n      return { ...state, registrationFinished: action.data };\n\n    case actionTypes.SET_REGISTRATION_VC_TYPE:\n      return { ...state, vcType: action.data };\n\n    case actionTypes.SET_UNAUTHORIZED:\n      return { ...state, unauthorized: action.data };\n\n    case actionTypes.SET_EIDAS_REDIRECT_URI:\n      return {\n        ...state,\n        eidasRedirectUri: action.data,\n      };\n\n    case actionTypes.SET_EIDAS_URI_PORT:\n      return {\n        ...state,\n        eidasUri: action.data.uri,\n        eidasPort: action.data.port,\n      };\n\n    case actionTypes.SET_CALLBACK:\n      return {\n        ...state,\n        didAuthCallback: action.data,\n      };\n\n    case actionTypes.SET_SEAL_SESSION:\n      return {\n        ...state,\n        sealSession: action.data,\n      };\n\n    case actionTypes.SET_DID_TRUE:\n      return {\n        ...state,\n        DID: true,\n        uuid: action.data,\n      };\n\n    case actionTypes.SET_BASE_URL:\n      return {\n        ...state,\n        baseUrl: action.data,\n      };\n\n    case actionTypes.SET_STEPPER_STEPS:\n      return {\n        ...state,\n        stepperSteps: action.data,\n      };\n\n    case actionTypes.INCREASE_CARD_INDEX:\n      return {\n        ...state,\n        cardIndex: state.cardIndex + 1,\n      };\n\n    case actionTypes.DECREASE_CARD_INDEX:\n      return {\n        ...state,\n        cardIndex: state.cardIndex - 1,\n      };\n\n    case actionTypes.SET_ENDPOINT:\n      return {\n        ...state,\n        endpoint: action.data,\n      };\n    case actionTypes.VC_SENT_TO_USER:\n      return {\n        ...state,\n        vcSent: true,\n      };\n    case actionTypes.SET_SERVER_SESSION_DATA:\n      return {\n        ...state,\n        sessionData: action.data,\n        // userEduGain: action.data.eduGAIN,\n        // userEidas: action.data.eidas,\n      };\n    case actionTypes.GET_QR_AUTH_RESPONSE:\n      // console.log(action.data);\n      return {\n        ...state,\n        fetching: false,\n        qrData: action.data.qr,\n        uuid: action.data.uuid,\n        requestSignature: action.data.signature,\n      };\n\n    case actionTypes.SET_ATTRIBUTES_SELECTION:\n      return {\n        ...state,\n        userSelection: action.data,\n      };\n\n    case actionTypes.MAKE_QR_AUTH_REQUEST:\n      return {\n        ...state,\n        fetching: true,\n        vcSent: false,\n      };\n\n    case actionTypes.ADD_ATTRIBUTES_TO_SELECTION: {\n      return {\n        ...state,\n        userSelection: [...state.userSelection, action.data],\n      };\n    }\n\n    case actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION: {\n      return {\n        ...state,\n        userSelection: [...state.userSelection, ...action.data],\n      };\n    }\n\n    case actionTypes.SET_SERVER_SESSION_ID: {\n      return {\n        ...state,\n        serverSessionId: action.data,\n      };\n    }\n\n    case actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION:\n      let newSelection = [\n        ...state.userSelection.filter((el, ind) => {\n          return ind !== action.index;\n        }),\n      ];\n      return {\n        ...state,\n        userSelection: newSelection,\n      };\n\n    default:\n      return state;\n  }\n};\n\n// ACTIONS\n\nexport function loginClicked() {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n    axios.get(\"connectionRequest\").then((data) => {\n      console.log(\"got the data form the server\");\n      console.log(data.data);\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n      });\n    });\n  };\n  // return dispatch => axios.get('https://38da089e.ngrok.io/connectionRequest')\n  //     .then(({ data }) => data)\n  //     .then(items => dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST, items }))\n  //     .then( () =>{\n  //       console.log(\"got there\")\n  //         return dispatch({ type: actionTypes.GET_QR_AUTH_RESPONSE, data:'these are my awesome data' })\n  //     });\n}\n\n// export function setDIDTrue() {\n//   return dispatch => {\n//     dispatch({\n//       type: actionTypes.SET_DID_TRUE\n//     });\n//   };\n// }\n\nexport function setStepperSteps(steps) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_STEPPER_STEPS,\n      data: steps,\n    });\n  };\n}\n\nexport function setBaseUrl(baseUrl) {\n  return (dispatch) => {\n    console.log(\"setting baseurl to\" + baseUrl);\n\n    dispatch({\n      type: actionTypes.SET_BASE_URL,\n      data: baseUrl,\n    });\n  };\n}\n\nexport function startSession(sessionId, sessionStatus) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.START_SESSION,\n      data: { sessionId: sessionId, status: sessionStatus },\n    });\n  };\n}\n\nexport function setServerSessionId(sessionId) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_ID,\n      data: sessionId,\n    });\n  };\n}\n\nexport function setSessionData(sessionData) {\n  return (dispatch) => {\n    console.log(`store.js setSessionData called with::`);\n    console.log(sessionData);\n    dispatch({\n      type: actionTypes.SET_SERVER_SESSION_DATA,\n      data: sessionData,\n    });\n  };\n}\n\nexport function setUserAttributeSelection(selectedAttributes) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_ATTRIBUTES_SELECTION,\n      data: selectedAttributes,\n    });\n  };\n}\n\nexport function updateSession(sessionStatus) {\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.UPDATE_SESSION,\n      data: { status: sessionStatus },\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function setEndpoint(endpoint) {\n  console.log(`store.js set endpoint to ${endpoint}`);\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.SET_ENDPOINT,\n      data: endpoint,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function addToSelection(index, source) {\n  // console.log(`store.js:: will add to seleciton ${index} , ${source}`);\n  const data = new UserSelection(index, source);\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.ADD_ATTRIBUTES_TO_SELECTION,\n      data: data,\n    });\n  };\n}\n\nexport function addSetToSelection(setArray) {\n  const data = [];\n  setArray.forEach((attrObj) => {\n    Object.keys(attrObj).map((key) => {\n      // console.log(`will fetch key ${key} from` )\n      data.push(new UserSelection(key, attrObj.source));\n      return new UserSelection(key, attrObj[key]);\n    });\n  });\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.ADD_SET_TO_ATTRIBUTES_SELECTION,\n      data: data,\n    });\n  };\n}\n\nexport function removeFromSelection(index) {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.REMOVE_ATTRIBUTE_FROM_SELECTION,\n      index: index,\n    };\n\n    dispatch(toDispatch);\n  };\n}\n\nexport function vcSentToUser() {\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.VC_SENT_TO_USER,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function increaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.INCREASE_CARD_INDEX,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function decreaseCardIndex() {\n  // console.log(`store.js will remove from  seleciton ${index}`);\n  return (dispatch) => {\n    let toDispatch = {\n      type: actionTypes.DECREASE_CARD_INDEX,\n    };\n    dispatch(toDispatch);\n  };\n}\n\nexport function requestVCgeneration(\n  url,\n  selectedAttributes,\n  vcType,\n  isMobile = false\n) {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n\n    console.log(\n      \"store.js - requestVCgeneration:: will make VC generation request\"\n    );\n    console.log(`store.js - requestVCgeneration:: for the url ${url}`);\n    // console.log(`store.js - requestVCgeneration:: with data`)\n    // console.log(selectedAttributes);\n    // console.log(isMobile);\n    axios\n      .post(url, {\n        data: selectedAttributes,\n        vcType: vcType,\n        isMobile: isMobile,\n      })\n      .then((data) => {\n        console.log(\n          \"store.js- requestVCgeneration:: got the data form the server\"\n        );\n        console.log(data.data);\n\n        console.log(\"store.js- requestVCgeneration:: got vcType\");\n        console.log(vcType);\n\n        return dispatch({\n          type: actionTypes.GET_QR_AUTH_RESPONSE,\n          data: data.data,\n          vcType: vcType,\n        });\n      });\n  };\n}\n\nexport function makeConnectionRequest() {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n    axios.post(\"/makeConnectionRequest\", {}).then((data) => {\n      console.log(\n        \"store.js:: makeConnectionRequest got the data form the server\"\n      );\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n      });\n    });\n  };\n}\n\nexport function completeDIDAuth(uuid) {\n  return (dispatch) => {\n    dispatch({ type: actionTypes.SET_DID_TRUE, data: uuid });\n  };\n}\n\nexport function makeAndPushVC(\n  url,\n  selectedAttributes,\n  vcType,\n  sealSession,\n  isMobile = false,\n  caseId = undefined\n) {\n  return (dispatch) => {\n    let bodyFormData = new FormData();\n    bodyFormData.set(\"data\", selectedAttributes);\n    console.log(\n      \"store.js - makeAndPushVC:: will make VC generation request with attributes\"\n    );\n    console.log(selectedAttributes);\n    let postBody = {\n      data: selectedAttributes,\n      sealSession: sealSession,\n      vcType: vcType,\n      isMobile: isMobile,\n    };\n    if (caseId) {\n      postBody.caseId = caseId;\n    }\n\n    axios\n      .post(url, postBody)\n      .then((data) => {\n        console.log(\"store.js- makeAndPushVC:: got the data form the server\");\n        dispatch({ type: actionTypes.VC_SENT_TO_USER });\n      })\n      .catch((err) => {\n        console.log(err);\n        dispatch({ type: actionTypes.SET_UNAUTHORIZED, data: true });\n      });\n    //TODO add here an action denoting that the VC was sent\n  };\n}\n\nexport function setSealSession(sessionId) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_SEAL_SESSION,\n      data: sessionId,\n    });\n  };\n}\n\nexport function makeSealSession(baseUrl) {\n  console.log(\"store:: makeSealSession\");\n  return (dispatch) => {\n    axios.post(`${baseUrl}vc/start-session`, {}).then((resp) => {\n      console.log(\"store.js:: makeSealSession\");\n      // console.log(resp.data);\n      return dispatch({\n        type: actionTypes.SET_SEAL_SESSION,\n        data: resp.data,\n      });\n    });\n  };\n}\n\nexport function makeOnlyConnectionRequest(sealSession, baseUrl, isMobile) {\n  let postData = {\n    sealSession: sealSession,\n  };\n\n  if (isMobile) {\n    postData.isMobile = isMobile;\n  }\n  return (dispatch) => {\n    console.log(\n      `makeOnlyConnectionRequest ${setSealSession}, ${baseUrl}, ${isMobile}`\n    );\n\n    dispatch({ type: actionTypes.MAKE_QR_AUTH_REQUEST });\n    let url =\n      baseUrl && baseUrl != \"\"\n        ? `${baseUrl}onlyConnectionRequest`\n        : \"/onlyConnectionRequest\";\n    console.log(`the url is ${url}`);\n    axios.post(url, postData).then((data) => {\n      console.log(\n        \"store.js -- onlyConnectionRequest:: got the data form the server\"\n      );\n      return dispatch({\n        type: actionTypes.GET_QR_AUTH_RESPONSE,\n        data: data.data,\n      });\n    });\n  };\n}\n\nexport function makeSessionWithDIDConnecetionRequest(baseUrl, isMobile) {\n  console.log(\"store:: makeSessionWithDIDConnecetionRequest***\");\n  let sessionId = \"\";\n  return (dispatch) => {\n    let url =\n      baseUrl && baseUrl !== \"\"\n        ? `${baseUrl}vc/start-session`\n        : `/vc/start-session`;\n    console.log(\n      `store:: makeSessionWithDIDConnecetionRequest*** -- posting ${url}`\n    );\n    axios\n      .post(url, {})\n      .then((resp) => {\n        sessionId = resp.data.sId;\n        console.log(\n          `store:: makeSessionWithDIDConnecetionRequest*** -- response with sessionId`\n        );\n        console.log(`the response is `);\n        console.log(resp);\n        console.log(`and the session id is `);\n        console.log(sessionId);\n        return dispatch({\n          type: actionTypes.SET_SEAL_SESSION,\n          data: sessionId,\n        });\n      })\n      .then((obj) => {\n        let url =\n          baseUrl && baseUrl !== \"\"\n            ? `${baseUrl}onlyConnectionRequest`\n            : `/onlyConnectionRequest`;\n        console.log(`isMobile? ${isMobile} and the session is ${sessionId}`);\n        console.log(sessionId);\n        console.log(\n          `store:: makeSessionWithDIDConnecetionRequest*** posting to ${url} with isMobile ${isMobile} nad sessionId ${sessionId}`\n        );\n        axios\n          .post(url, {\n            sealSession: sessionId,\n            baseUrl: baseUrl,\n            isMobile: isMobile,\n          })\n          .then((data) => {\n            return dispatch({\n              type: actionTypes.GET_QR_AUTH_RESPONSE,\n              data: data.data,\n            });\n          });\n      });\n  };\n}\n\nexport function setDidCallback(callback) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_CALLBACK,\n      data: callback,\n    });\n  };\n}\n\nexport function setEidasUriPort(uri, port) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_EIDAS_URI_PORT,\n      data: { uri: uri, port: port },\n    });\n  };\n}\n\nexport function setEidasRedirectUri(uri) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_EIDAS_REDIRECT_URI,\n      data: uri,\n    });\n  };\n}\n\nexport function setUnauthorized(value) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_UNAUTHORIZED,\n      data: value,\n    });\n  };\n}\n\nexport function setRegistrationVCType(value) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_REGISTRATION_VC_TYPE,\n      data: value,\n    });\n  };\n}\n\nexport function setRegistrationEmail(value) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_REGISTRATION_EMAIL,\n      data: value,\n    });\n  };\n}\n\nexport function setRegistrationFinished(value) {\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_REGISTRATION_FINISHED,\n      data: value,\n    });\n  };\n}\n\nexport function setUsers(users) {\n  console.log(`store.js setting users to`);\n  console.log(users);\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_USERS,\n      data: users,\n    });\n  };\n}\n\nexport function setEndorsement(endorsement){\n  console.log(`store.js setEndorsement called`);\n  return (dispatch) => {\n    dispatch({\n      type: actionTypes.SET_ENDORSEMENT,\n      data: endorsement,\n    });\n  };\n\n}\n\n\n\nconst rootReducer = combineReducers({\n  // ...your other reducers here\n  // you have to pass formReducer under 'form' key,\n  // for custom keys look up the docs for 'getFormState'\n  appReducer: reducer,\n  form: formReducer,\n});\n\nexport const initializeStore = (preloadedState = initialState) => {\n  return createStore(\n    rootReducer,\n    preloadedState,\n    composeWithDevTools(applyMiddleware(thunkMiddleware))\n  );\n};\n"]},"metadata":{},"sourceType":"module"}